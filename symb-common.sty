\usepackage{esop-common}
\usepackage{esop-clj-grammar}
\usepackage{color}
\usepackage{amssymb}
\usepackage{mathtools}

\newmeta\ltivar{x}
\newmeta\ltiE{E}
\newmeta\ltiEp{E'}
\newmeta\ltiF{F}
\newcommand\ltifun[4]{\ma{\textbf{fun}[#1](\hastype{#2}{#3})#4}}
\newcommand\ltifunmono[3]{\ma{\textbf{fun}(\hastype{#1}{#2})#3}}
\newcommand\ltiufun[2]{\ma{\textbf{fun}(#1)#2}}
\newcommand\ltiappinst[3]{\ma{#1[#2](#3)}}
\newcommand\ltiapp[2]{\ma{#1(#2)}}
\newcommand\ltisel[2]{\ma{#1 . #2}}
\newcommand\ltirec[1]{\ma{\{#1\}}}
\newcommand\ltimatchsuper[2]{\ma{#1 \nearrow #2}}
\newcommand\ltimatchsub[2]{\ma{#1 \searrow #2}}
\newmeta\ltitvar{a}
\newmeta\ltitvarp{a'}
\newmeta\ltitvarpp{a''}
\newmeta\ltiC{C}
\newmeta\ltiCp{C'}
\newmeta\ltiD{D}
\newmeta\ltiT{T}
\newmeta\ltiTp{T'}
\newmeta\ltiTpp{T''}
\newmeta\ltiS{S}
\newmeta\ltiSp{S'}
\newmeta\ltiR{R}
\newmeta\ltiRp{R'}
\newmeta\ltiP{P}
\newmeta\ltiPp{P'}
\newmeta\ltiV{V}
\newmeta\ltiEmptyEnv{\ma{\epsilon}}
\newmeta\ltiEnv{\ma{\Gamma}}
\newmeta\ltiEnvp{\ma{\Gamma}'}
\newmeta\ltiWild{?}
\newbfop\ltiTop{\ma{\top}}
\newbfop\ltiBot{\ma{\bot}}
\newbfop\ltiBot{\ma{\bot}}
\newbfop\ltiSeqableOp{S}
\newbfop\ltiInt{I}
\newcommand\ltiEnvConcat[2]{\ma{#1 , #2}}
\newcommand\ltiSeqable[1]{\ma{\ltiSeqableOp #1}}
\newcommand\ltiRec[1]{\ma{\{#1\}}}
\newcommand\ltiArrow[3]{\ma{(#1 \xrightarrow[]{#2} #3)}}
\newcommand\ltiArrowMono[2]{\ma{(#1 \xrightarrow[]{} #2)}}
\newcommand\ltiClosure[2]{\ma{#1 @ #2}}
\newcommand\ltiSubst[3]{\ma{\sigma_{{#1 , #2}}  #3}}
\newcommand\ltireplace[3]{\ma{[#1 / #2]#3}}
% type inference algorithm
\newcommand\ltijudgement[4]{\ma{#1, #2 \vdash^{w} {\hastype{#3}{#4}}}}
% colored type system (external language)
\newcommand\lticjudgement[3]{\ma{#1 \vdash^{c} {\hastype{#2}{#3}}}}
% non-colored type system (internal language)
\newcommand\ltitjudgement[3]{\ma{#1 \vdash {\hastype{#2}{#3}}}}
% non-colored subtyping (deprecated)
\newcommand\ltisubtype[2]{\ma{#1 \mathbin{<:} #2}}
% subtype for internal types (not colored)
\newcommand\ltiisubtype[2]{\ma{#1 \mathbin{<:} #2}}
% subtype for colored (external) types 
\newcommand\lticsubtype[2]{\ma{#1 \leq #2}}
\newcommand\ltiagreeexcepttvars[3]{\ma{#1 \triangleleft_{#2} #3}}
\newcommand\lticoincideinherited[2]{\ma{#1 \sim #2}}
\newcommand\ltigenconstraint[5]{\ma{#1 \vdash_{#2} #3 \mathbin{<:} #4 \Rightarrow #5}}
\newcommand\ltigendconstraint[6]{\ma{#1 \vdash_{#2} #3 \mathbin{<:} #4 \Rightarrow #5, #6}}
\newcommand\ltiCUnion[2]{\ma{#1 \cup #2}}
\newcommand\ltiCEmpty[0]{\ma{\varnothing}}
\newcommand\ltiEnvLookup[2]{\ma{#1(#2)}}
\newcommand\ltipromote[3]{\ma{#1 \Uparrow^{#2} #3}}
\newcommand\ltidemote[3]{\ma{#1 \Downarrow^{#2} #3}}
\newcommand\ltitv[1]{\ma{\text{tv}(#1)}}
\newcommand\ltiCSet[1]{\ma{\{#1\}}}
\newcommand\ltiCDep[3]{\ma{\texttt{dep}_{#1}^{#2}(#3)}}
\newcommand\ltiCEntry[3]{\ma{#1 \mathbin{<:} #2 \mathbin{<:} #3}}
\newcommand\ltiDEntry[2]{\ma{#1 \mathbin{<:}_d #2}}
\newcommand\ltiCIntersect[2]{\ma{#1 \land #2}}
\newcommand\ltiaccessibletv[2]{\ma{\texttt{accessibletv}_{#1}(#2)}}
\newcommand\lticheckorder[6]{\ma{\texttt{checkorder}(#1, #2, #3, #4, #5, #6)}}

%\newcommand\ltiSyn[1]{{\color{blue}#1}}
%\newcommand\ltiChk[1]{{\color{red}#1}}
%\newcommand\ltiSynChk[1]{{\color{black}#1}}
\newcommand\ltiSyn[1]{{\textsubscript{$\wedge$} #1}}
\newcommand\ltiChk[1]{{\textsuperscript{$\vee$} #1}}
\newcommand\ltiSynChk[1]{{\diamond #1}}
