\begin{figure*}
$$
\begin{array}{lclr}

{\withpolarity
  {\replacefor
    {\filterset {\thenprop {\prop{}}}{\elseprop {\prop{}}}}
    {\object{}}
    {\x{}}}
  {\polaritymeta{}}}
  &=&
{\filterset 
  {\withpolarity
    {\replacefor
      {\thenprop {\prop{}}}
      {\object{}}
      {\x{}}}
    {\polaritymeta{}}}
  {\withpolarity
    {\replacefor
      {\elseprop {\prop{}}}
      {\object{}}
      {\x{}}}
    {\polaritymeta{}}}}
\\\\
{\withpolarity
  {\replacefor
    {\isprop {\propisnotmeta{}} {\pth {\pathelem{}} {\x{}}}}
    {\pth {\pathelemp{}} {\y{}}}
    {\x{}}}
  {\polaritymeta{}}}
&=&
  {\isprop {({\withpolarity
              {\replacefor
               {\propisnotmeta{}}
               {\pth {\pathelemp{}} {\y{}}}
               {\x{}}}
              {\polaritymeta{}}})}
           {{\pathelem{}}({\pth {\pathelemp{}} {\y{}}})}}
           \\

{\pluspolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\pth {\pathelem{}} {\x{}}}}
  {\emptyobject{}}
  {\x{}}}
}
&=&
{\topprop{}}
\\
{\minuspolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\pth {\pathelem{}} {\x{}}}}
  {\emptyobject{}}
  {\x{}}}
}
&=&
{\botprop{}}

\\
{\withpolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\pth {\pathelem{}} {\x{}}}}
  {\object{}}
  {\z{}}}
{\polaritymeta{}}}
&=&
  {\isprop {\propisnotmeta{}} {\pth {\pathelem{}} {\x{}}}}
  & \x{} \not= \z{}\ \text{and}\ \z{} \not\in {\fv {\propisnotmeta{}}}

\\
{\pluspolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\pth {\pathelem{}} {\x{}}}}
  {\object{}}
  {\z{}}}
}
&=&
{\topprop{}}
  & \x{} \not= \z{}\ \text{and}\ \z{} \in {\fv {\propisnotmeta{}}}
\\
{\minuspolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\pth {\pathelem{}} {\x{}}}}
  {\object{}}
  {\z{}}}
}
&=&
{\botprop{}}
  & \x{} \not= \z{}\ \text{and}\ \z{} \in {\fv {\propisnotmeta{}}}

\\
{\withpolarity
{\replacefor
  {\topprop{}}
  {\object{}}
  {\x{}}}
{\polaritymeta{}}}
&=&
  {\topprop{}}

\\
{\withpolarity
{\replacefor
  {\botprop{}}
  {\object{}}
  {\x{}}}
{\polaritymeta{}}}
&=&
  {\botprop{}}

\\
{\pluspolarity
{\replacefor
  {({\impprop {\prop{1}} {\prop{2}}})}
  {\object{}}
  {\x{}}}
}
&=&
{\impprop 
  {\minuspolarity {\replacefor {\prop{1}} {\object{}} {\x{}}}}
  {\pluspolarity {\replacefor {\prop{2}} {\object{}} {\x{}}}}}
\\
{\minuspolarity
{\replacefor
  {({\impprop {\prop{1}} {\prop{2}}})}
  {\object{}}
  {\x{}}}
}
&=&
{\impprop 
  {\pluspolarity {\replacefor {\prop{1}} {\object{}} {\x{}}}}
  {\minuspolarity {\replacefor {\prop{2}} {\object{}} {\x{}}}}}
\\
{\withpolarity
{\replacefor
  {({\orprop {\prop{1}} {\prop{2}}})}
  {\object{}}
  {\x{}}}
{\polaritymeta{}}}
&=&
{\orprop 
  {\withpolarity
    {\replacefor {\prop{1}} {\object{}} {\x{}}}
    {\polaritymeta{}}}
  {\withpolarity
    {\replacefor {\prop{2}} {\object{}} {\x{}}}
    {\polaritymeta{}}}}
\\
{\withpolarity
{\replacefor
  {({\andprop {\prop{1}} {\prop{2}}})}
  {\object{}}
  {\x{}}}
{\polaritymeta{}}}
&=&
{\andprop 
{\withpolarity
  {\replacefor {\prop{1}} {\object{}} {\x{}}}
  {\polaritymeta{}}}
{\withpolarity
  {\replacefor {\prop{2}} {\object{}} {\x{}}}
  {\polaritymeta{}}}}

    \\\\

{\withpolarity
{\replacefor
  {\pth {\pathelem{}} {\x{}}}
  {\pth {\pathelemp{}} {\y{}}}
  {\x{}}}
{\polaritymeta{}}}
           &=&
{\pth{\pathelem{}}{\pth {\pathelemp{}} {\y{}}}}

    \\

{\withpolarity
{\replacefor
  {\pth {\pathelem{}} {\x{}}}
  {\emptyobject{}}
  {\x{}}}
{\polaritymeta{}}}
           &=&
{\emptyobject{}}

    \\

{\withpolarity
{\replacefor
  {\pth {\pathelem{}} {\x{}}}
  {\object{}}
  {\z{}}}
{\polaritymeta{}}}
           &=&
{\pth {\pathelem{}} {\x{}}}

& \x{} \not= \z{}
    \\

{\withpolarity
{\replacefor
  {\emptyobject{}}
  {\object{}}
  {\x{}}}
{\polaritymeta{}}}
           &=&
{\emptyobject{}}

\end{array}
$$
\center{\text{Substitution on types is capture-avoiding structural recursion.}}
\caption{Substitution}
\end{figure*}
