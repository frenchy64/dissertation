% macros for Clojure grammars
\usepackage{mathpartir}
\usepackage{amsfonts}
\usepackage{bbm}
\usepackage{xcolor}
\usepackage{xspace}
\usepackage{mmm}

\newcommand\specialformfont[1]{{\textbf{#1}}}
\newcommand\trackE[2]{({\specialformfont{track}}\ #1\ #2)}
\newcommand\trackpolyE[3]{({\specialformfont{trackPoly}}\ #1\ #2\ #3)}
\newcommand\genE[0]{({\specialformfont{genInt}})}
\newcommand\inferletliteral[0]{{\specialformfont{let}}}
\newcommand\assocE[3]{({\specialformfont{assoc}}\ #1\ #2\ #3)}
\newcommand\PairOfT[1]{{\mathsf{PairOf}}}
\newcommand\NatT[1]{{\mathsf{N}}}
\newcommand\IntT[1]{{\mathsf{N}}}
\newcommand\UnknownT[1]{{\mathrm{?}}}
\newcommand\HMaptwo[2]{({\mathsf{HMap}}\ #1\ #2)}
\newcommand\appendone[2]{#1 :: [#2]}
\newcommand\Proxy[0]{\specialformfont{Proxy}}
\newcommand\ProxyE[3]{(\Proxy{}\ #1\ #2\ #3)}
% types
\newcommand\arrow[2]{[#1 \rightarrow #2]}
\newmeta\ty{\tau}

% semantics
\newcommand\bigstep[4]{ #1 \vdash #2 \Downarrow #3\ ; #4}
\newcommand\bigstepgen[6]{ #1 ; #2 \vdash #3 \Downarrow #4\ ; #5 ; #6}

% environments
\newmeta\aenv{\ma{A}}
\newmeta\tenv{\ma{\Gamma}}
\newmeta\atenv{\ma{\Delta}}

% algorithm
\newcommand\infermetafnfont[1]{\mathsf{#1}}
\newcommand\steptwo[0]{\infermetafnfont{squashLocal}}
\newcommand\steptwohelper[0]{\infermetafnfont{squashLocal'}}
\newcommand\stepthree[0]{\infermetafnfont{squashGlobal}}
\newcommand\squashhorizonally[0]{squashHorizontally} %% TODO needs definition!
\newcommand\aliassinglehmap[0]{aliasSingleHMap}      %% TODO needs definition!
\newcommand\inferanns[0]{\infermetafnfont{inferAnns}}
\newcommand\generatetenv[0]{\infermetafnfont{gen{\Gamma}}}
\newcommand\genupdate[0]{\infermetafnfont{genUpdate}}
\newcommand\trackmeta[0]{\infermetafnfont{track}}
\newcommand\trackpolymeta[0]{\infermetafnfont{trackPoly}}
\newcommand\inferupdate[4]{\infermetafnfont{update}(#1, #2, #3, #4)}
\newcommand\inferupdatecommon[6]{\inferupdate{#1}{#2}{#3}{#4} #5 #6} % takes the = sign to allow extra alignment
\newcommand\inferupdatenoalign[5]{\inferupdatecommon{#1}{#2}{#3}{#4}{=}{#5}}
\newcommand\inferupdatealign[5]{\inferupdatecommon{#1}{#2}{#3}{#4}{&=&}{#5}}
\newcommand\joinalign[4]{\infermetafnfont{join}(#1, #2, #3) &=& #4}
\newcommand\joinnoalign[4]{\infermetafnfont{join}(#1, #2, #3) = #4}
\newcommand\joinexpression[3]{\infermetafnfont{join}(#1, #2, #3)}

% aliases
\newmeta\alias{a}

% expressions
\newmeta\exp{e}
\newmeta\val{v}
\newmeta\kw{k}
\newmeta\xvar{x}
\newmeta\yvar{y}
\newmeta\num{n}

% abstract syntax for pathelem
\newmeta\pth{l}
\newcommand\inferpefont[1]{\textbf{#1}}
\newcommand\inferkeype[2]{\ma{\inferpefont{key}_{#1}(#2)}}
\newcommand\dompe[0]{\ma{\inferpefont{dom}}}
\newcommand\rngpe[0]{\ma{\inferpefont{rng}}}

% abstract syntax for paths
\newmeta\inferpath{\ma{\pi}}

% inference results
\newmeta\res{{\ma{r}}}
